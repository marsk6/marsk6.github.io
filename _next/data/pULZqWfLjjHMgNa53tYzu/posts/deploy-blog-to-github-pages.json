{"pageProps":{"post":{"__typename":"Post","slug":"deploy-blog-to-github-pages","title":"ç”¨ Github Pages éƒ¨ç½²é™æ€åšå®¢","tags":[{"__typename":"Tag","name":"æŠ€æœ¯æ–¹æ¡ˆ"}],"category":null,"ctime":1611905340000,"mtime":1660224480000,"date":"01-29","content":"\nGithub Pages æ˜¯ Github æä¾›çš„å…è´¹é™æ€æ–‡ä»¶æ‰˜ç®¡æœåŠ¡ï¼Œå¯ä»¥ç”¨æ¥éƒ¨ç½²é™æ€åšå®¢ã€‚\n\n## åˆ›å»ºä»“åº“\n\nåœ¨ Github ä¸Šæ–°å»ºä¸€ä¸ªä»“åº“ `New repository`\n\n![[deploy-blog-to-github-pages.png|æ–°å»ºä»“åº“]]\n\nä»“åº“åå­—å¿…é¡»æ˜¯ `<user>.github.io`ã€‚è®¾ç½®ä»“åº“å¯è§æ€§ï¼Œè¦ä½¿ç”¨ Github Pagesï¼Œå¯è§æ€§å¿…é¡»æ˜¯ `Public`\n\n![[deploy-blog-to-github-pages-1.png|é…ç½®ä»“åº“]]\n\n## è®¾ç½® Github Pages\n\n![[deploy-blog-to-github-pages-2.png|è®¾ç½® github page]]\n\nä½ å¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ª `gh-pages` åˆ†æ”¯ï¼ˆåé¢éƒ¨ç½²ä¼šç”¨åˆ°ï¼‰\næŠŠ nextjs blog çš„æ„å»ºè¾“å‡ºæ¨åˆ° `gh-pages` åˆ†æ”¯ï¼Œåˆ†æ”¯å†…çš„æ–‡ä»¶ç›®å½•ç»“æ„ä¼šæˆä¸ºç½‘ç«™çš„è·¯ç”±è·¯å¾„\nå¯¹é Jekyll é¡¹ç›®ï¼Œæ„å»ºè¾“å‡ºçš„æ ¹ç›®å½•è¿˜è¦æœ‰ `.nojekyll` æ–‡ä»¶ï¼ˆç¡®ä¿é™æ€èµ„æºèƒ½æ­£ç¡®åŠ è½½ï¼‰\n\n![[deploy-blog-to-github-pages-3.png|blog çš„æ„å»ºè¾“å‡º]]\n\nå¦‚æœæ˜¯ Mac/Linux ç”¨æˆ·ï¼Œåœ¨é¡¹ç›® package.json å¯æ·»åŠ \n\n```json\n\"postbuild\": \"touch ./<è¾“å‡ºç›®å½•å>/.nojekyll\"\n```\n\nè¿™æ—¶å¯ä»¥è®¿é—®åšå®¢äº†\n\n## ç”¨ Github Action éƒ¨ç½²\n\nä¸Šé¢çš„æ­¥éª¤æ˜¯æˆ‘åœ¨æœ¬åœ°æ„å»ºå¹¶æ‰‹åŠ¨æ¨åˆ° `gh-pages` åˆ†æ”¯ï¼Œä½†æ›´å¥½çš„æ–¹å¼æ˜¯é€šè¿‡ Github Action è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚\n\nåœ¨é¡¹ç›®ä¸­åˆ›å»º `.github/workflows/publish.yaml`\n\n```yaml\nname: GitHub Actions Build and Deploy Demo\non:\n  push:\n    branches:\n      - master # å½“ master åˆ†ä¹‹æœ‰æ›´æ–°æ—¶è‡ªåŠ¨æ„å»ºéƒ¨ç½²\npermissions:\n  contents: write\njobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout ğŸ›ï¸\n        uses: actions/checkout@v3 # clone é¡¹ç›®ä»£ç \n      - name: Cache\n        uses: actions/setup-node@v3 # è®¾ç½®ç¼“å­˜\n        with:\n          cache: 'yarn'\n      - name: build\n        run: | # ä¸²è¡Œæ‰§è¡Œæ„å»ºå‘½ä»¤\n          yarn\n          yarn build\n      - name: Build and Deploy # éƒ¨ç½²åˆ° github pages\n        uses: JamesIves/github-pages-deploy-action@v4 # ç”¨ JamesIves/github-pages-deploy-action è¿™ä¸ª action\n        with:\n          folder: out # nextjs blog çš„æ„å»ºè¾“å‡ºç›®å½•\n          token: ${{ secrets.ACCESS_TOKEN }} #  ä¸ºäº†æ¨åˆ°ä½ é¡¹ç›®ä¸‹çš„ gh-pages åˆ†æ”¯ï¼Œéœ€è¦ä½ çš„ github token\n```\n\nåˆ›å»º ACCESS_TOKEN\n\n1. https://github.com/settings/tokens è®°ä¸‹åˆ›å»ºçš„ token\n2. è®¾ç½® ACCESS_TOKEN\n\n![[deploy-blog-to-github-pages-5.png|secrets.ACCESS_TOKEN é…ç½®]]\n\nä»£ç æ¨é€åˆ° master åï¼Œå°±ä¼šè§¦å‘æ„å»ºéƒ¨ç½²\n\n![[deploy-blog-to-github-pages-4.png|è¿è¡Œ action]]\n\n## å…³è”\n\n[åˆ›å»º GitHub Pages ç«™ç‚¹ - GitHub æ–‡æ¡£](https://docs.github.com/zh/pages/getting-started-with-github-pages/creating-a-github-pages-site)\n\n> [æœ¬åšå®¢](https://marsk6.github.io/) æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ BY-NC-SA è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼\n","prevArticle":{"__typename":"Post","title":"ç”¨ Headless CMS ç®¡ç†åšå®¢","slug":"build-blog-with-headless-cms"},"nextArticle":null,"readingTime":"2","brief":"github pages æ˜¯ github æä¾›çš„å…è´¹é™æ€æ–‡ä»¶æ‰˜ç®¡æœåŠ¡ï¼Œå¯ä»¥ç”¨æ¥éƒ¨ç½²é™æ€åšå®¢ã€‚æœ¬æ–‡ä»‹ç»ç”¨ next.js ç”Ÿæˆçš„é™æ€åšå®¢ï¼Œéƒ¨ç½²åˆ° github pages çš„è¿‡ç¨‹","toc":"- [åˆ›å»ºä»“åº“](#%E5%88%9B%E5%BB%BA%E4%BB%93%E5%BA%93)\n- [è®¾ç½® Github Pages](#%E8%AE%BE%E7%BD%AE-github-pages)\n- [ç”¨ Github Action éƒ¨ç½²](#%E7%94%A8-github-action-%E9%83%A8%E7%BD%B2)\n- [å…³è”](#%E5%85%B3%E8%81%94)"},"relatedTags":[{"__typename":"Tag","name":"æŠ€æœ¯æ–¹æ¡ˆ","posts":[{"__typename":"Post","slug":"intersectionobserver-table-of-content"},{"__typename":"Post","slug":"build-blog-with-nextjs"},{"__typename":"Post","slug":"build-blog-with-headless-cms"},{"__typename":"Post","slug":"deploy-blog-to-github-pages"}]}]},"__N_SSG":true}