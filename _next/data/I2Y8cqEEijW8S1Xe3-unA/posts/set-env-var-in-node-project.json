{"pageProps":{"post":{"__typename":"Post","slug":"set-env-var-in-node-project","title":"node é¡¹ç›®è¯»å–ç¯å¢ƒå˜é‡","tags":[{"__typename":"Tag","name":"å·¥ç¨‹åŒ–"}],"category":null,"ctime":1697596560000,"mtime":1697616240000,"date":"10-18","content":"\nnode é¡¹ç›®ä» `process.env` è¯»å–ç¯å¢ƒå˜é‡æ—¶ï¼Œ`process.env` æœ‰å“ªäº›æ¥æºï¼Ÿ\n\n### å‘½ä»¤è¡Œ\n\nä½¿ç”¨ `cross-env` å¤„ç†è·¨å¹³å°ç¯å¢ƒå˜é‡è®¾ç½®ã€‚\n\n```json title={package.json}\n{\n  \"scripts\": {\n    \"dev\": \"cross-env MY_ENV=hello node ./index.js\",\n    \"start\": \"cross-env MY_ENV=hello webpack\"\n  }\n}\n```\n\n> åœ¨ mac ä¸‹å¯ä»¥ç›´æ¥è®¾ç½®å±€éƒ¨å˜é‡ï¼Œ`{ \"dev\": \"MY_ENV=hello node ./index.js\" }`ã€‚\n\n### `.env` æ–‡ä»¶\n\nç¯å¢ƒå˜é‡é…ç½®åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `.env`ã€‚\n\n```shell title={.env}\nPORT=8080\nMY_ENV=live\n```\n\nå®‰è£… `dotenv`ï¼Œ`npm install dotenv --save`ã€‚\n\n`dotenv` ä¼šè‡ªåŠ¨è¯»å–é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `.env` åˆ° `process.env`ï¼Œå¹¶ä¸”ä¸ä¼šè¦†ç›–å·²å­˜åœ¨ `process.env` ä¸Šçš„ç¯å¢ƒå˜é‡ã€‚\n\n```javascript title={app.js}\nrequire('dotenv').config();\nconst http = require('http');\nconst port = parseInt(process.env.PORT, 10) || 5000;\nhttp\n  .createServer((request, response) => {\n    response.writeHead(200, {\n      'Content-Type': 'text/plain',\n    });\n    response.write(process.env.MY_ENV);\n    response.end();\n  })\n  .listen(port);\n```\n\næŒ‰ç…§ `dotenv` çš„æœ€ä½³å®è·µï¼š\n\n- åº”è¯¥æŠŠ `.env` åŠ åˆ° `.gitignore`ï¼Œå› ä¸ºæ¯ä¸ªç¯å¢ƒçš„é…ç½®ä¸åŒï¼Œè¿˜å¯èƒ½åŒ…å«æ•°æ®åº“å¯†é’¥ç­‰ï¼›\n- ä¸è¦æŒ‰éƒ¨ç½²ç¯å¢ƒåˆ’åˆ† `.env.test`ã€`.env.staging` ç­‰ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œå› ä¸ºéš¾ä»¥æ‰©å±•ï¼Œæ›´å¤šéƒ¨ç½²ç¯å¢ƒå°±éœ€è¦æ·»åŠ æ›´å¤šçš„é…ç½®æ–‡ä»¶ã€‚\n\n### shell\n\nå¦‚æœåœ¨æ‰§è¡Œ node è„šæœ¬å‰ï¼Œè¿˜éœ€ä¸ºå…¶ä»–çš„ shell è„šæœ¬è®¾ç½®ç¯å¢ƒå˜é‡ã€‚\n\n```shell\nset -o allexport # ğŸ‘‰ æŠŠåé¢åˆ›å»ºçš„å˜é‡æ ‡è®°ä¸ºå¯¼å‡ºï¼Œå³å¯¼å‡ºä¸ºç¯å¢ƒå˜é‡\n. ./.env\nset +o allexport # å…³é—­ ğŸ‘† è¿™ç§æ¨¡å¼\n```\n\n### å…³è”\n\n1. [Node Environment Variables: Process env Node](https://www.knowledgehut.com/blog/web-development/node-environment-variables)\n\n> [æœ¬åšå®¢](https://marsk6.github.io/) æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ BY-NC-SA è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼\n","prevArticle":{"__typename":"Post","title":"åœ¨åšæœäº‘è®¾ç½®æ–‡ä»¶åŒæ­¥è¿‡æ»¤è§„åˆ™","slug":"ignore-file-with-jianguoyun-sync"},"nextArticle":null,"readingTime":"1","brief":"ä½¿ç”¨ `.env` å’Œ `dotenv` é…ç½®ç®¡ç† node é¡¹ç›®çš„ç¯å¢ƒå˜é‡","toc":"- [å‘½ä»¤è¡Œ](#%E5%91%BD%E4%BB%A4%E8%A1%8C)\n- [`.env` æ–‡ä»¶](#env-%E6%96%87%E4%BB%B6)\n- [shell](#shell)\n- [å…³è”](#%E5%85%B3%E8%81%94)"},"relatedTags":[{"__typename":"Tag","name":"å·¥ç¨‹åŒ–","posts":[{"__typename":"Post","slug":"set-env-var-in-node-project"}]}]},"__N_SSG":true}